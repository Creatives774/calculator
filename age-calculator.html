<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Age Calculator — DeepSeek AI</title>
  <style>
    /* =========================
       Reset & base
       ========================= */
    * { box-sizing: border-box; }
    html,body { height:100%; margin:0; font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial; background:linear-gradient(180deg,#eef6ff 0%, #ffffff 100%); color:#0b2b4a; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; }
    .wrap {
      min-height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:32px;
    }

    /* =========================
       Card / Layout
       ========================= */
    .card {
      width:100%;
      max-width:820px;
      background: #fff;
      border-radius:18px;
      padding:28px;
      box-shadow: 0 8px 30px rgba(11,43,74,0.08);
      border: 1px solid rgba(11,43,74,0.04);
      display:grid;
      grid-template-columns: 1fr 420px;
      gap:24px;
    }

    /* Stack to single column on small screens */
    @media (max-width:880px) {
      .card { grid-template-columns: 1fr; padding:20px; border-radius:14px; }
    }

    header h1 {
      margin:0 0 8px 0;
      font-size:20px;
      letter-spacing:-0.2px;
    }
    header p { margin:0; color:#3c5a7a; opacity:0.9; font-size:13px; }

    /* =========================
       Form styles
       ========================= */
    form { margin-top:18px; display:flex; flex-direction:column; gap:12px; }
    .row { display:flex; gap:12px; align-items:center; }
    .row .field { flex:1; display:flex; flex-direction:column; gap:6px; }
    label { font-size:13px; color:#23405f; font-weight:600; }
    input[type="date"] {
      appearance:none;
      -webkit-appearance:none;
      padding:10px 12px;
      border-radius:10px;
      border:1px solid rgba(11,43,74,0.09);
      background:#f8fbff;
      font-size:14px;
      outline:none;
      transition: box-shadow .12s ease, border-color .12s ease;
    }
    input[type="date"]:focus { box-shadow:0 6px 20px rgba(13,71,140,0.08); border-color:#5b9bff; }

    .controls { display:flex; gap:10px; margin-top:6px; }
    button {
      cursor:pointer;
      padding:10px 14px;
      border-radius:10px;
      border: none;
      font-weight:600;
      font-size:14px;
      transition: transform .08s ease, box-shadow .08s ease, opacity .12s ease;
    }
    button:active { transform: translateY(1px); }
    .btn-primary {
      background: linear-gradient(180deg,#1f7bff,#0b63d6);
      color:white;
      box-shadow: 0 8px 20px rgba(11,99,214,0.18);
    }
    .btn-primary:disabled { opacity:0.55; cursor:not-allowed; box-shadow:none; transform:none; }
    .btn-ghost {
      background:transparent;
      border:1px solid rgba(11,43,74,0.08);
      color:#08304d;
    }

    /* =========================
       Result pane
       ========================= */
    .result {
      display:flex;
      flex-direction:column;
      gap:12px;
      padding:18px;
      border-radius:12px;
      background: linear-gradient(180deg,#f6fbff,#ffffff);
      border:1px solid rgba(11,43,74,0.035);
      align-items:stretch;
    }
    .result .big {
      display:flex;
      gap:12px;
      align-items:center;
      justify-content:space-between;
    }
    .pill {
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:10px 12px;
      border-radius:12px;
      background:linear-gradient(90deg,#e9f2ff,#ffffff);
      border:1px solid rgba(11,43,74,0.04);
      min-width:110px;
      justify-content:center;
      font-weight:700;
      color:#0a3b6e;
      font-size:16px;
    }

    .breakdown {
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:10px;
    }
    @media (max-width:520px) { .breakdown { grid-template-columns: 1fr; } }

    .stat {
      background:linear-gradient(180deg,#ffffff,#fbfdff);
      border-radius:10px;
      padding:12px;
      border:1px solid rgba(11,43,74,0.03);
      text-align:center;
    }
    .stat .n { font-size:20px; font-weight:800; color:#0b3b6a; }
    .stat .l { font-size:12px; color:#3f5b77; margin-top:6px; font-weight:600; }

    .note { font-size:12px; color:#45607f; opacity:0.9; }

    footer {
      margin-top:12px;
      font-size:12px;
      color:#2b4b6a;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:12px;
    }
    .footer-cred { opacity:0.9; font-weight:600; }
    .small { font-size:12px; color:#547394; }

    /* subtle micro-interaction */
    .fade-in { animation:fadeIn 260ms ease; }
    @keyframes fadeIn { from { opacity:0; transform:translateY(6px);} to { opacity:1; transform:none; } }

    /* error text */
    .error { color:#b02a37; font-weight:700; font-size:13px; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card" role="application" aria-labelledby="appTitle">
      <!-- LEFT: Form / controls -->
      <section aria-label="Age calculator controls" style="padding-right:10px;">
        <header>
          <h1 id="appTitle">Age Calculator</h1>
          <p>Calculate exact age (years, months, days). Handles leap years, month lengths & edge cases.</p>
        </header>

        <form id="ageForm" autocomplete="off" novalidate>
          <div class="row">
            <div class="field">
              <label for="dob">Date of Birth</label>
              <input id="dob" type="date" required aria-required="true" />
            </div>
            <div class="field">
              <label for="current">Current Date</label>
              <input id="current" type="date" required aria-required="true" />
            </div>
          </div>

          <div class="controls" role="group" aria-label="Actions">
            <button id="calcBtn" class="btn-primary" type="button">Calculate Age</button>
            <button id="resetBtn" class="btn-ghost" type="button">Reset</button>
            <div style="flex:1"></div>
          </div>

          <div id="validation" class="note" aria-live="polite" style="margin-top:8px;"></div>
        </form>

        <footer>
          <div class="footer-cred">Built with ❤️ using DeepSeek AI</div>
          <div class="small">Timezone-safe: uses local dates from inputs</div>
        </footer>
      </section>

      <!-- RIGHT: Result -->
      <aside>
        <div class="result" id="resultPane" aria-live="polite">
          <div class="big">
            <div>
              <div class="pill" id="summaryPill">No result yet</div>
              <div class="note" style="margin-top:8px;">Exact years · months · days</div>
            </div>
            <div style="text-align:right;">
              <div class="note">Quick tips</div>
              <div class="note">• Don't use a future birth date</div>
              <div class="note">• Adjust "Current Date" to compute age on any date</div>
            </div>
          </div>

          <div class="breakdown" id="breakdown">
            <div class="stat">
              <div class="n" id="yearsVal">—</div>
              <div class="l">Years</div>
            </div>
            <div class="stat">
              <div class="n" id="monthsVal">—</div>
              <div class="l">Months</div>
            </div>
            <div class="stat">
              <div class="n" id="daysVal">—</div>
              <div class="l">Days</div>
            </div>
          </div>

          <div id="extra" style="margin-top:8px;">
            <div class="note" id="totalDays">Total days: —</div>
            <div class="note" id="approxHours">Approx. hours: —</div>
          </div>
        </div>
      </aside>
    </div>
  </div>

  <script>
    // =========================
    // Helper: safe date creation from yyyy-mm-dd (keeps local date semantics)
    // =========================
    function parseDateInput(value) {
      // value format: "YYYY-MM-DD"
      if (!value) return null;
      const [y, m, d] = value.split('-').map(Number);
      // Create Date at local midnight to avoid timezone shifts with UTC methods
      return new Date(y, m - 1, d);
    }

    // =========================
    // Helper: days in month for a given year-month
    // =========================
    function daysInMonth(year, monthIndex) {
      // monthIndex: 0..11
      return new Date(year, monthIndex + 1, 0).getDate();
    }

    // =========================
    // Core: compute age components (years, months, days)
    // - Uses real calendar arithmetic with borrowing months/days.
    // - Returns null if current < birth (invalid).
    // =========================
    function computeAgeComponents(birthDate, currentDate) {
      // normalize copies (strip time portion)
      const b = new Date(birthDate.getFullYear(), birthDate.getMonth(), birthDate.getDate());
      const c = new Date(currentDate.getFullYear(), currentDate.getMonth(), currentDate.getDate());

      if (c < b) return null; // invalid (birth in future)

      let by = b.getFullYear(), bm = b.getMonth(), bd = b.getDate();
      let cy = c.getFullYear(), cm = c.getMonth(), cd = c.getDate();

      let years = cy - by;
      let months = cm - bm;
      let days = cd - bd;

      if (days < 0) {
        // borrow 1 month from months
        let prevMonthIndex = (cm - 1 + 12) % 12;
        let prevMonthYear = (cm === 0) ? cy - 1 : cy;
        days += daysInMonth(prevMonthYear, prevMonthIndex);
        months -= 1;
      }

      if (months < 0) {
        months += 12;
        years -= 1;
      }

      return { years, months, days };
    }

    // =========================
    // Utility: calculate total days between two local dates (inclusive/exclusive decision)
    // We'll compute difference in time and convert -> floor difference in days.
    // =========================
    function totalDaysBetween(startDate, endDate) {
      // normalize to local midnight times
      const s = new Date(startDate.getFullYear(), startDate.getMonth(), startDate.getDate());
      const e = new Date(endDate.getFullYear(), endDate.getMonth(), endDate.getDate());
      const msPerDay = 24 * 60 * 60 * 1000;
      // difference inclusive? Usually age in days counts full days passed -> use difference in days
      return Math.floor((e - s) / msPerDay);
    }

    // =========================
    // DOM wiring
    // =========================
    const dobInput = document.getElementById('dob');
    const currentInput = document.getElementById('current');
    const calcBtn = document.getElementById('calcBtn');
    const resetBtn = document.getElementById('resetBtn');
    const validation = document.getElementById('validation');

    const summaryPill = document.getElementById('summaryPill');
    const yearsVal = document.getElementById('yearsVal');
    const monthsVal = document.getElementById('monthsVal');
    const daysVal = document.getElementById('daysVal');
    const totalDaysEl = document.getElementById('totalDays');
    const approxHoursEl = document.getElementById('approxHours');
    const resultPane = document.getElementById('resultPane');

    // set current date default to today
    (function setTodayAsCurrent() {
      const today = new Date();
      const y = today.getFullYear();
      const m = String(today.getMonth() + 1).padStart(2, '0');
      const d = String(today.getDate()).padStart(2, '0');
      currentInput.value = `${y}-${m}-${d}`;
    })();

    // validation & enabling/disabling
    function validateInputs() {
      validation.textContent = '';
      const dobVal = dobInput.value;
      const curVal = currentInput.value;
      if (!dobVal) {
        calcBtn.disabled = true;
        validation.textContent = 'Please enter Date of Birth.';
        return false;
      }
      if (!curVal) {
        calcBtn.disabled = true;
        validation.textContent = 'Please enter Current Date.';
        return false;
      }

      const dob = parseDateInput(dobVal);
      const cur = parseDateInput(curVal);

      if (cur < dob) {
        calcBtn.disabled = true;
        validation.innerHTML = '<span class="error">Current Date is earlier than Date of Birth. Please correct.</span>';
        return false;
      }

      // OK
      calcBtn.disabled = false;
      return true;
    }

    // Update live when inputs change
    dobInput.addEventListener('input', () => {
      validateInputs();
    });
    currentInput.addEventListener('input', () => {
      validateInputs();
    });

    // initial validation
    validateInputs();

    // Calculate handler
    calcBtn.addEventListener('click', () => {
      // best-effort: do not ask questions — compute immediately
      const dobVal = dobInput.value;
      const curVal = currentInput.value;
      const ok = validateInputs();
      if (!ok) return;

      const dob = parseDateInput(dobVal);
      const cur = parseDateInput(curVal);

      // compute age components
      const comps = computeAgeComponents(dob, cur);
      if (!comps) {
        validation.innerHTML = '<span class="error">Invalid dates (birth in future).</span>';
        return;
      }

      // compute totals
      const totalDays = totalDaysBetween(dob, cur);
      const approxHours = totalDays * 24;

      // render with micro animations
      yearsVal.textContent = comps.years;
      monthsVal.textContent = comps.months;
      daysVal.textContent = comps.days;

      summaryPill.textContent = `${comps.years}y ${comps.months}m ${comps.days}d`;
      totalDaysEl.textContent = `Total days: ${totalDays.toLocaleString()}`;
      approxHoursEl.textContent = `Approx. hours: ${approxHours.toLocaleString()}`;

      [summaryPill, yearsVal, monthsVal, daysVal, totalDaysEl, approxHoursEl].forEach(el => {
        el.classList.remove('fade-in');
        // reflow to restart animation
        void el.offsetWidth;
        el.classList.add('fade-in');
      });

      validation.textContent = ''; // clear any warnings
    });

    // Reset handler
    resetBtn.addEventListener('click', () => {
      dobInput.value = '';
      // reset current to today
      (function resetToday() {
        const today = new Date();
        const y = today.getFullYear();
        const m = String(today.getMonth() + 1).padStart(2, '0');
        const d = String(today.getDate()).padStart(2, '0');
        currentInput.value = `${y}-${m}-${d}`;
      })();

      yearsVal.textContent = '—';
      monthsVal.textContent = '—';
      daysVal.textContent = '—';
      summaryPill.textContent = 'No result yet';
      totalDaysEl.textContent = 'Total days: —';
      approxHoursEl.textContent = 'Approx. hours: —';
      validation.textContent = '';
      calcBtn.disabled = true;
    });

    // keyboard accessibility: Enter in either input triggers Calculate if valid
    [dobInput, currentInput].forEach(inp => {
      inp.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
          e.preventDefault();
          if (!calcBtn.disabled) calcBtn.click();
        }
      });
    });

    // final boot: small accessibility announcement
    window.addEventListener('load', () => {
      validation.textContent = 'Ready. Enter Date of Birth and click Calculate.';
      validateInputs();
    });

    // =========================
    // Notes on correctness:
    // - computeAgeComponents borrows days from the previous month and months from years when needed,
    //   which handles varying month lengths and leap years correctly because daysInMonth uses the real calendar.
    // - totalDaysBetween uses difference of local-midnights to avoid timezone-caused off-by-one errors.
    // =========================
  </script>
</body>
</html>
